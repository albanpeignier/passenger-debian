diff -Nur -x '*.orig' -x '*~' passenger-2.0.4/lib/rake/rdoctask.rb passenger-2.0.4.new/lib/rake/rdoctask.rb
--- passenger-2.0.4/lib/rake/rdoctask.rb	2008-11-15 13:00:45.000000000 +0100
+++ passenger-2.0.4.new/lib/rake/rdoctask.rb	2008-12-02 15:54:20.000000000 +0100
@@ -128,7 +128,8 @@
       
       directory @rdoc_dir
       task rdoc_task_name => [rdoc_target]
-      file rdoc_target => @rdoc_files + [Rake.application.rakefile] do
+      # Fixes compatibility with rake 0.7.1
+      file rdoc_target => @rdoc_files + [$rakefile] do
         rm_r @rdoc_dir rescue nil
         @before_running_rdoc.call if @before_running_rdoc
         args = option_list + @rdoc_files
